!function(o){var e={};function t(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return o[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=o,t.c=e,t.d=function(o,e,r){t.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:r})},t.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},t.t=function(o,e){if(1&e&&(o=t(o)),8&e)return o;if(4&e&&"object"==typeof o&&o&&o.__esModule)return o;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var a in o)t.d(r,a,function(e){return o[e]}.bind(null,a));return r},t.n=function(o){var e=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(e,"a",e),e},t.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},t.p="",t(t.s=0)}([function(o,e,t){"use strict";t.r(e);var r,a,i=320,m=192,n=16,s=m+n+n,l=58,c=0,f=1,d=2,v=3,g=4,b=5,y=2,u=4,p=1,x=2,k=4,h=-3,O=-2,j=-1,D=0,Y=1,w=2,X=4,L=5,R=6,U=7,z=8,S=9,E=10,M=11,A=12,C=13,_=14,q=15,P=16,T={left:!1,up:!1,right:!1,down:!1,fire:!1},I=16,B=!0,F=2,G=0,H=0,J=1,K=2,N=3,Q=4,V=H;var W=0,Z=1,$=Z,oo=Z,eo=0,to=0,ro=255,ao=0,io=0,mo=0,no=[{r:0,g:0,b:0},{r:205,g:205,b:205},{r:255,g:255,b:255},{r:255,g:216,b:76},{r:255,g:152,b:44},{r:250,g:82,b:85},{r:162,g:81,b:217},{r:107,g:100,b:255},{r:85,g:182,b:255},{r:97,g:208,b:112},{r:33,g:217,b:27},{r:134,g:217,b:34},{r:161,g:176,b:52},{r:213,g:181,b:67},{r:168,g:252,b:65}],so=0,lo=1,co=14,fo=[240,255,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,255,255],vo=[240,255,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,255,15],go=[240,255,255,48,0,0,48,0,0,48,0,0,48,0,0,48,0,0,240,255,15],bo=[240,254,21,48,3,31,48,3,255,48,0,255,48,0,63,48,0,0,240,255,15],yo=[240,255,15,48,0,0,48,0,0,48,0,0,48,0,0,48,0,0,240,255,255],uo=[3,7,253,167],po={gfxData:[32,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],states:[0],state:0,color:4,room:-1,x:0,y:0,movementX:0,movementY:0,size:7,linkedObject:j,linkedObjectX:0,linkedObjectY:0,displayed:!0},xo=[20,6,15,243,254,14,4,4,30,63,127,227,195,195,199,255,60,8,143,225,63,22,128,64,38,31,11,14,30,36,68,142,30,63,127,127,127,127,62,28,8,248,128,224,17,12,12,12,14,27,127,206,128,252,254,254,126,120,32,110,66,126],ko=[0,2,0,1],ho=[208,232,240,246,240,246],Oo=[4,254,170,254,170,6,254,170,254,170,254,170,8,254,170,254,170,254,170,254,170,10,254,170,254,170,254,170,254,170,254,170,12,254,170,254,170,254,170,254,170,254,170,254,170,14,254,170,254,170,254,170,254,170,254,170,254,170,254,170,16,254,170,254,170,254,170,254,170,254,170,254,170,254,170,254,170],jo=[0,0,1,1,2,2,3,3,4,4,5,5,6,6,5,5,4,4,3,3,2,2,1,1],Do={room:0,x:0,y:0,previousX:0,previousY:0,linkedObject:j,linkedObjectX:0,linkedObjectY:0,hitX:!1,hitY:!1,hitObject:j},Yo=[{gfxData:Oo,states:jo,state:0,color:so,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:Oo,states:jo,state:0,color:so,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:Oo,states:jo,state:0,color:so,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:[95,240,128,128,128,244,4,135,229,135,128,5,229,167,225,135,224,1,224,160,240,1,64,224,64,64,64,1,224,160,224,128,224,1,32,32,224,160,224,1,1,1,136,168,168,168,248,1,224,160,240,1,128,224,143,137,15,138,233,128,142,10,238,160,232,136,238,10,142,224,164,164,4,128,8,14,10,10,128,14,10,14,8,14,128,4,14,4,4,4,128,4,14,4,4,4],states:[0],state:0,color:co,room:30,x:80,y:105,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:[7,4,12,4,4,4,4,14,7,14,17,1,2,4,8,31,7,14,17,1,6,1,17,14],states:[0,1,2],state:0,color:11,room:0,x:80,y:64,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:xo,states:ko,state:0,color:5,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:xo,states:ko,state:0,color:3,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:xo,states:ko,state:0,color:11,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:[5,32,64,255,64,32],states:[0],state:0,color:3,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:[24,195,195,195,195,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,195,195,195,195],states:[0],state:0,color:6,room:-1,x:0,y:0,movementX:0,movementY:0,size:7,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:uo,states:[0],state:0,color:3,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:uo,states:[0],state:0,color:2,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:uo,states:[0],state:0,color:so,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:[7,129,129,195,195,255,90,102,11,1,128,1,128,60,90,102,195,129,129,129],states:[0,1],state:0,color:so,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:[1,128],states:[0],state:0,color:lo,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:[9,129,129,195,126,126,60,24,24,126],states:[0],state:0,color:co,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:[8,60,126,231,195,195,195,195,195],states:[0],state:0,color:so,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1},{gfxData:null,states:[0],state:0,color:0,room:-1,x:0,y:0,movementX:0,movementY:0,size:0,linkedObject:0,linkedObjectX:0,linkedObjectY:0,displayed:!1}],wo=[D,17,77,49,12,0,0,Y,15,77,49,12,0,0,w,16,77,49,12,0,0,L,14,80,32,0,0,0,R,1,80,32,0,0,0,U,29,80,32,0,0,0,z,18,32,32,0,0,0,S,4,42,55,0,0,0,E,17,32,64,0,0,0,M,14,32,64,0,0,0,A,29,32,64,0,0,0,C,26,32,32,0,0,0,_,21,81,18,0,0,0,q,28,48,32,0,0,0,P,27,128,32,0,0,0,255,0,0,0,0,0,0],Xo=[D,17,77,49,12,0,0,Y,15,77,49,12,0,0,w,16,77,49,12,0,0,L,20,80,32,0,3,3,R,25,80,32,0,3,3,U,4,80,32,0,3,3,z,17,32,32,0,0,0,S,11,64,64,0,0,0,E,9,32,64,0,0,0,M,6,32,64,0,0,0,A,25,32,64,0,0,0,C,2,32,32,0,0,-3,_,21,69,18,0,0,0,q,20,48,32,0,0,0,P,14,128,32,0,0,0,255,0,0,0,0,0,0],Lo=[q,19,26,L,1,29,R,1,29,U,1,29,z,1,29,S,1,29,E,1,29,M,1,22,A,1,18,C,1,29,P,1,29,j,0,0],Ro=[{graphicsData:go,flags:0,color:6,roomUp:0,roomRight:0,roomDown:0,roomLeft:0},{graphicsData:fo,flags:x,color:12,roomUp:8,roomRight:2,roomDown:128,roomLeft:3},{graphicsData:fo,flags:0,color:11,roomUp:17,roomRight:3,roomDown:131,roomLeft:1},{graphicsData:[240,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,255,15],flags:k,color:13,roomUp:6,roomRight:1,roomDown:134,roomLeft:2},{graphicsData:[240,255,15,0,12,12,240,12,60,240,12,0,240,255,63,0,48,48,240,51,63],flags:0,color:7,roomUp:16,roomRight:5,roomDown:7,roomLeft:6},{graphicsData:[240,255,255,0,0,0,240,252,255,240,0,192,240,63,207,0,48,204,240,243,204],flags:0,color:7,roomUp:29,roomRight:6,roomDown:8,roomLeft:4},{graphicsData:[240,243,12,0,48,12,240,63,15,240,0,0,240,240,0,0,48,0,240,255,255],flags:0,color:7,roomUp:7,roomRight:4,roomDown:3,roomLeft:5},{graphicsData:[240,51,63,0,48,60,240,255,60,0,3,60,240,51,60,0,51,12,240,243,12],flags:0,color:7,roomUp:4,roomRight:8,roomDown:6,roomLeft:8},{graphicsData:[240,243,204,0,51,12,240,51,252,0,51,0,240,243,255,0,0,0,240,255,15],flags:0,color:7,roomUp:5,roomRight:7,roomDown:1,roomLeft:7},{graphicsData:[240,255,204,0,0,204,240,3,207,0,3,0,240,243,252,0,51,12,240,51,204],flags:0,color:lo,roomUp:10,roomRight:10,roomDown:11,roomLeft:10},{graphicsData:[240,255,15,0,48,0,240,48,255,0,48,192,240,243,192,0,3,192,240,255,204],flags:0,color:lo,roomUp:3,roomRight:9,roomDown:9,roomLeft:9},{graphicsData:[240,51,204,0,48,204,0,63,207,0,0,192,0,63,195,0,48,192,240,255,255],flags:0,color:lo,roomUp:9,roomRight:12,roomDown:28,roomLeft:13},{graphicsData:vo,flags:k,color:8,roomUp:28,roomRight:13,roomDown:29,roomLeft:11},{graphicsData:vo,flags:x,color:10,roomUp:15,roomRight:11,roomDown:14,roomLeft:12},{graphicsData:yo,flags:0,color:9,roomUp:13,roomRight:16,roomDown:15,roomLeft:16},{graphicsData:bo,flags:0,color:2,roomUp:14,roomRight:15,roomDown:13,roomLeft:15},{graphicsData:bo,flags:0,color:so,roomUp:1,roomRight:28,roomDown:4,roomLeft:28},{graphicsData:bo,flags:0,color:3,roomUp:6,roomRight:3,roomDown:2,roomLeft:1},{graphicsData:go,flags:0,color:3,roomUp:18,roomRight:18,roomDown:18,roomLeft:18},{graphicsData:[240,240,255,0,0,3,240,255,3,0,0,0,48,63,255,0,48,0,240,240,255],flags:0,color:lo,roomUp:21,roomRight:20,roomDown:21,roomLeft:22},{graphicsData:[240,255,255,0,0,192,240,255,207,0,0,12,240,15,255,0,15,192,48,207,204],flags:p,color:lo,roomUp:22,roomRight:21,roomDown:22,roomLeft:19},{graphicsData:[240,240,255,48,0,0,48,63,255,0,48,0,240,240,255,48,0,3,240,240,255],flags:p,color:lo,roomUp:19,roomRight:22,roomDown:19,roomLeft:20},{graphicsData:[48,207,204,0,192,204,240,255,15,0,0,0,240,255,15,0,0,0,240,255,15],flags:0,color:lo,roomUp:20,roomRight:19,roomDown:27,roomLeft:21},{graphicsData:[240,255,255,0,0,0,240,255,15,0,0,12,240,255,12,240,3,204,240,51,207],flags:0,color:5,roomUp:25,roomRight:24,roomDown:25,roomLeft:24},{graphicsData:[240,255,255,0,0,192,240,255,207,0,0,204,240,51,255,240,51,0,240,63,12],flags:0,color:5,roomUp:26,roomRight:23,roomDown:26,roomLeft:23},{graphicsData:[240,51,207,240,48,0,240,51,255,0,51,0,240,255,0,0,0,0,240,255,15],flags:0,color:5,roomUp:23,roomRight:26,roomDown:23,roomLeft:26},{graphicsData:[240,63,12,240,0,12,240,255,15,0,48,0,240,48,0,0,48,0,240,255,15],flags:0,color:5,roomUp:24,roomRight:25,roomDown:24,roomLeft:25},{graphicsData:[240,255,15,48,0,0,48,0,0,48,0,0,48,0,0,48,0,0,240,255,15],flags:0,color:5,roomUp:137,roomRight:137,roomDown:137,roomLeft:137},{graphicsData:go,flags:0,color:6,roomUp:29,roomRight:7,roomDown:140,roomLeft:8},{graphicsData:yo,flags:0,color:5,roomUp:143,roomRight:1,roomDown:16,roomLeft:3},{graphicsData:fo,flags:0,color:6,roomUp:6,roomRight:1,roomDown:6,roomLeft:3}],Uo=[16,15,15,5,17,17,29,10,10,28,22,22,27,12,12,3,12,12],zo=[18,26,27],So=[17,15,16],Eo=[E,M,A,z,S,q,0],Mo=[z,U,U,O,U,q,U,S,U,P,U,A,0,0],Ao=[z,R,E,R,R,O,R,q,0,0],Co=[z,L,L,O,L,q,L,M,0,0],_o=[q,z,S,E,M,A,L,R,U,P,0];function qo(){var o=se,e=le,t={left:1,right:0};if($=t.left,oo=t.right,V!=Q&&a&&!o)Do.room=17,Do.x=160,Do.y=64,Do.previousX=Do.x,Do.previousY=Do.y,Do.linkedObject=j,to=Do.room,ro=255,V==H?function(){for(var o=0;Yo[o].gfxData;o++){(r=Yo[o]).movementX=0,r.movementY=0,r.linkedObject=j}var e=0==eo?wo:Xo,t=0;for(;255!=e[t];){var r=e[t++],a=e[t++],i=e[t++],m=e[t++],n=e[t++],s=e[t++],l=e[t++];Yo[r].room=a,Yo[r].x=i,Yo[r].y=m,Yo[r].state=n,Yo[r].movementX=s,Yo[r].movementY=l}if(2==eo){var c=Lo,f=0,d=(r=c[f++],c[f++]),v=c[f++];do{for(;;){if((a=31*Math.random())>=d&&a<=v){Yo[r].room=a;break}}r=c[f++],d=c[f++],v=c[f++]}while(r>j)}}():(Yo[R].state=0,Yo[U].state=0,Yo[L].state=0,Yo[R].linkedObject=j,Yo[U].linkedObject=j,Yo[L].linkedObject=j),V=J;else if(V==H)Yo[X].state=eo,r&&!e&&++eo>2&&(eo=0),to=0,Do.room=0,Do.x=0,Do.y=0,Po();else if(V==J||V==K||V==N)if(18==Yo[q].room)V=Q,ao=255,ue(c);else if(r&&!e)V=H,Do.room=0,Do.x=0,Do.y=0,Do.previousX=Do.x,Do.previousY=Do.y,to=Do.room,Po();else if(function(o){o.left=ce,o.up=de,o.right=fe,o.down=ve,o.fire=ge}(T),V==J)!function(){var o=Do.x,e=Do.y,t=Yo[R].linkedObject==O||Yo[U].linkedObject==O||Yo[L].linkedObject==O;Do.previousY=Do.y,Do.hitObject=j,to=Do.room,T.up&&(Do.y+=6);T.down&&(Do.y-=6);if(t)Do.hitY=!0;else{if(Do.y>n+m+6){Do.y=n+n-2,Do.previousY=Do.y;var r=Ro[Do.room];Do.room=r.roomUp,Do.room=Ko(Do.room)}else if(Do.y<26)if(Do.room==zo[D])Do.x=160,Do.y=88,Do.previousX=Do.x,Do.previousY=Do.y,Do.room=So[D],Do.room=Ko(Do.room);else if(Do.room==zo[Y])Do.x=160,Do.y=88,Do.previousX=Do.x,Do.previousY=Do.y,Do.room=So[Y],Do.room=Ko(Do.room);else if(Do.room==zo[w])Do.x=160,Do.y=88,Do.previousX=Do.x,Do.previousY=Do.y,Do.room=So[w],Do.room=Ko(Do.room);else{var a=m+n,s=Ko((r=Ro[Do.room]).roomDown);Qo(s,o,a)?(Do.hitY=!0,to=s):(Do.y=a,Do.room=s)}var l=Vo(0),c=function(o,e,t){var r=Yo[S];if(r.room==o&&Do.linkedObject!=S){var a=e/2-r.x;if(a>=10&&a<=23){var i=r.y-t/2;if(i>=-5&&i<=21)return!0}}return!1}(Do.room,o,Do.y);(!c&&Qo(Do.room,o,Do.y)||l>j)&&(Do.hitY=!0,Do.hitObject=l)}Do.previousX=Do.x,T.right&&(Do.x+=6);T.left&&(Do.x-=6);if(t)Do.hitX=!0;else{if(Do.x>=i-4){if(Do.x=5,3==Do.room)Do.room=30;else{r=Ro[Do.room];Do.room=r.roomRight}Do.room=Ko(Do.room)}else if(Do.x<4){Do.x=i-5;r=Ro[Do.room];Do.room=r.roomLeft,Do.room=Ko(Do.room)}l=Vo(0);(Qo(Do.room,Do.x,e)||l>j)&&(Do.hitX=!0,Do.hitObject=l)}}(),function(){if(Do.linkedObject>=0){var o=Yo[Do.linkedObject];o.x=Do.x/2+Do.linkedObjectX,o.y=Do.y/2+Do.linkedObjectY,o.room=Do.room}!function(){var o=Yo[D],e=Yo[Y],t=Yo[w];Do.room==o.room&&12!=o.state&&$o(o,Do.x-4,Do.y-1,8,8)?(Do.room=zo[D],Do.y=n+n-2,Do.previousY=Do.y,o.state=0):Do.room==e.room&&12!=e.state&&$o(e,Do.x-4,Do.y-1,8,8)?(Do.room=zo[Y],Do.y=n+n-2,Do.previousY=Do.y,e.state=0):Do.room==t.room&&12!=t.state&&$o(t,Do.x-4,Do.y-1,8,8)&&(Do.room=zo[w],Do.y=n+n-2,Do.previousY=Do.y,t.state=0);for(var r=L;Yo[r].gfxData;r++){var a=Yo[r];if(a.room=Math.round(a.room),a.x+=a.movementX,a.y+=a.movementY,a.y>106&&(a.y=13,a.room=Ko(Ro[a.room].roomUp)),a.x<3&&(a.x=154,a.room=Ko(Ro[a.room].roomLeft)),a.y<13&&(a.room==zo[D]?(a.y=92,a.room=Ko(So[D])):a.room==zo[Y]?(a.y=92,a.room=Ko(So[Y])):a.room==zo[w]?(a.y=92,a.room=Ko(So[w])):(a.y=105,a.room=Ko(Ro[a.room].roomDown))),a.x>155&&(a.x=3,a.room=Ko(Ro[a.room].roomRight)),a.linkedObject>j){var i=Yo[a.linkedObject];i.x=a.x+a.linkedObjectX,i.y=a.y+a.linkedObjectY,i.room=a.room}}}()}(),Po(),++V;else if(V==K){if(function(){if(T.fire&&Do.linkedObject>=0)Do.linkedObject=j,ue(g);else{var o=Vo(z);o>j&&(o==Do.linkedObject&&(o=Vo(o+1)),o>j&&(Do.linkedObject=o,Do.linkedObjectX=Yo[o].x-Do.x/2,Do.linkedObjectY=Yo[o].y-Do.y/2,ue(b)))}}(),!Do.hitX&&!Do.hitY){var s=Vo(0);if(s>j&&s==Do.linkedObject){var l=Do.x-Do.previousX;Do.linkedObjectX+=l/2;var f=Do.y-Do.previousY;Do.linkedObjectY+=f/2}}if(Do.hitX){if(Do.hitObject>j&&Do.hitObject==Do.linkedObject){l=Do.x-Do.previousX;Do.linkedObjectX+=l/2}Do.x=Do.previousX,Do.hitX=!1}if(Do.hitY){if(Do.hitObject>j&&Do.hitObject==Do.linkedObject){f=Do.y-Do.previousY;Do.linkedObjectY+=f/2}Do.y=Do.previousY,Do.hitY=!1}++G,Ro[Do.room].color==lo?(po.room=Do.room,po.x=(Do.x-30)/2,po.y=(Do.y+24)/2):po.room=-1,function(){var o=Yo[C];++To>=4&&(o.state=0==o.state?1:0,To=0);o.linkedObject!=j&&ro<255&&++ro;if(ro>=255){var e=Wo(o);e.x-=7,e.y-=7,e.w+=14,e.h+=14;var t=_o,r=0;do{var a=Yo[t[r]];if(a.room==o.room&&o.linkedObject!=t[r]){var i=a.x,m=a.y;o.x<i?o.movementX=3:o.x>i?o.movementX=-3:o.movementX=0,o.y<m?o.movementY=3:o.y>m?o.movementY=-3:o.movementY=0;var n=Wo(a);oe(e.x,e.y,e.w,e.h,n.x,n.y,n.w,n.h)&&(t[r]==Do.linkedObject&&(Do.linkedObject=j),o.linkedObject=t[r],o.linkedObjectX=8,o.linkedObjectY=0,ro=0);break}}while(t[++r])}}(),function(){var o=Yo[D],e=Yo[Y],t=Yo[w],r=Yo[E],a=Yo[M],i=Yo[A];o.room!=Do.room||r.room!=Do.room||0!=o.state&&12!=o.state||Zo(o,r)&&o.state++;0!=o.state&&12!=o.state&&o.state++;o.state>22?(o.state=0,Ro[zo[D]].roomDown=So[D]):12==o.state&&(Ro[zo[D]].roomDown=zo[D]);e.room!=Do.room||a.room!=Do.room||0!=e.state&&12!=e.state||Zo(e,a)&&e.state++;0!=e.state&&12!=e.state&&e.state++;e.state>22?(e.state=0,Ro[zo[Y]].roomDown=So[Y]):12==e.state&&(Ro[zo[Y]].roomDown=zo[Y]);t.room!=Do.room||i.room!=Do.room||0!=t.state&&12!=t.state||Zo(t,i)&&t.state++;0!=t.state&&12!=t.state&&t.state++;t.state>22?(t.state=0,Ro[zo[w]].roomDown=So[w]):12==t.state&&(Ro[zo[w]].roomDown=zo[w])}(),Po(),++V}else V==N&&(Io=Jo(Yo[U],Mo,2,Io),Bo=Jo(Yo[R],Ao,2,Bo),Ho=Jo(Yo[L],Co,3,Ho),function(){var o=Yo[P],e=0;for(;Eo[e];){var t=Yo[Eo[e]];if(Eo[e]!=Do.linkedObject&&t.room==o.room){t.x<o.x?t.x++:t.x>o.x&&t.x--,t.y<o.y-o.gfxData[0]?t.y++:t.y>o.y-o.gfxData[0]&&t.y--;break}++e}}(),Po(),V=J);else V==Q&&(ao>0&&--ao,Po(),(a&&!o||r&&!e)&&(V=H));a=o,r=e,function(){(io+=2)>=360&&(io-=360);(mo+=11)>200&&(mo=0)}()}function Po(){var o=to,e=Ro[o],t=e.graphicsData,r=V==Q&&ao>0?ee():no[e.color],a=no[lo];!function(o){o!=be&&(be=o,je(o))}(r),ye(a.r,a.g,a.b,0,0,i,s),po.room==Do.room&&0==po.state&&No(po);for(var m=e.flags&p,n=[16,32,64,128,128,64,32,16,8,4,2,1,1,2,4,8,16,32,64,128],l=0;l<=6;l++)for(var c=t[3*l+0],f=t[3*l+1],d=t[3*l+2],v=6-l,g=0;g<20;g++){(g<4?!!(c&n[g]):g<12?!!(f&n[g]):!!(d&n[g]))&&(ye(r.r,r.g,r.b,8*g,32*v,8,32),ye(r.r,r.g,r.b,m?8*(g+20):8*(40-(g+1)),32*v,8,32))}r=no[Ro[to].color];var b=Do.x-4&-2,y=Do.y-10&-2;ye(r.r,r.g,r.b,b,y,8,8),function(o){for(var e=[],t=0;t<I;t++)e.push(j);var r=0;po.room==o&&(e[r++]=h);for(var a=-1,i=-1,m=0;Yo[m].gfxData;m++)Yo[m].displayed=!1,Yo[m].room==o&&(e[r++]=m,a<0&&(a=Yo[m].color),i=Yo[m].color);r<=F?G=0:(G>r&&(G=0),G>I&&(G=0),e[G]==j&&(G=0));po.displayed=!1;var n=0,l=G;if(B)for(;n++<r&&n<=F;)e[l]>j?(No(Yo[e[l]]),Yo[e[l]].displayed=!0,i=Yo[e[l]].color):e[l]==h&&(po.displayed=!0),++l>I?l=0:e[l]==j&&(l=0);else{for(;n++<r&&n<=F;)e[l]>j?(Yo[e[l]].displayed=!0,i=Yo[e[l]].color):e[l]==h&&(po.displayed=!0),++l>I?l=0:e[l]==j&&(l=0);for(var c=0;Yo[c].gfxData;c++)Yo[c].room==o&&No(Yo[c])}if(Ro[o].flags&x){ye((f=no[a>0?a:so]).r,f.g,f.b,26,0,4,s)}if(Ro[o].flags&k){var f;ye((f=no[a>0?i:so]).r,f.g,f.b,300,0,4,s)}}(o)}var To=0;var Io=0;var Bo=0;var Fo,Go,Ho=0;function Jo(o,e,t,r){if(0==o.state){if(Do.room==o.room&&$o(o,Do.x-4,Do.y-4,8,8)&&(o.state=3,r=252-ho[2*eo+($==W?1:0)],o.x=Do.x/2,o.y=Do.y/2,o.movementX=0,o.movementY=0,ue(f)),Zo(o,Yo[z])&&(o.state=1,o.movementX=0,o.movementY=0,ue(v)),0==o.state){var a=e,i=oo==Z?0:2;do{var m,n=0,s=0,l=0,c=a[i+0],g=a[i+1];if(c>j&&Yo[c]!=o)(m=Yo[c]).room==o.room&&(n=-1,s=m.x,l=m.y);else if(0==n&&a[i+1]==O&&Do.room==o.room&&(n=1,s=Do.x/2,l=Do.y/2),0==n&&g>j)(m=Yo[g]).room==o.room&&(n=1,s=m.x,l=m.y);if(n>0||n<0)return o.movementX=0,o.movementY=0,o.x<s?o.movementX=n*t:o.x>s&&(o.movementX=-n*t),void(o.y<l?o.movementY=n*t:o.y>l&&(o.movementY=-n*t))}while(a[i+=2])}}else 2==o.state?(Do.room=o.room,Do.x=2*(o.x+3),Do.y=2*(o.y-10),o.movementX=0,o.movementY=0,to=Do.room):3==o.state&&--r<=0&&(Do.room==o.room&&$o(o,Do.x-4,Do.y-1,8,8)?(o.linkedObject=O,o.state=2,ue(d)):o.state=0);return r}function Ko(o){128&o&&(o=Uo[(-129&o)+eo]);return o}function No(o){for(var e=o.color==co?ee():no[o.color],t=2*o.x,r=2*o.y,a=o.size/2+1,m=o.states[o.state],n=o.gfxData,s=0,l=n[s++],c=0;c<m;c++)s+=l,l=n[s++];t-=y,r-=u;for(var f=0;f<l;f++){for(var d=0;d<8;d++){if(n[s]&1<<7-d)(c=t+2*d*a)>=i&&(c-=i),ye(e.r,e.g,e.b,c,r,2*a,2)}s++,r-=2}}function Qo(o,e,t){var r=!1;t-=30;var a=Ro[o],i=a.graphicsData,m=a.flags&p,n=[16,32,64,128,128,64,32,16,8,4,2,1,1,2,4,8,16,32,64,128];a.flags&x&&e-8<26&&(r=!0),a.flags&k&&e+4>300&&Yo[_].room!=o&&(r=!0);for(var s=0;s<=6&&!r;s++)for(var l=i[3*s+0],c=i[3*s+1],f=i[3*s+2],d=6-s,v=0;v<20;v++){if(v<4?!!(l&n[v]):v<12?!!(c&n[v]):!!(f&n[v])){if(oe(e-4,t-4,8,8,8*v,32*d,8,32)){r=!0;break}if(m){if(oe(e-4,t-4,8,8,8*(v+20),32*d,8,32)){r=!0;break}}else if(oe(e-4,t-4,8,8,8*(40-(v+1)),32*d,8,32)){r=!0;break}}}return r}function Vo(o){for(var e=o;Yo[e].gfxData;e++){var t=Yo[e];if(t.displayed&&Do.room==t.room&&$o(t,Do.x-4,Do.y-1,8,8))return e}return j}function Wo(o){for(var e=2*o.x,t=2*o.y,r=16*(o.size/2+1),a=o.states[o.state],i=o.gfxData,m=0,n=i[m++],s=0;s<a;s++)m+=n,n=i[m++];return{x:e-=y,y:t,w:r,h:n*=2}}function Zo(o,e){if(o.room!=e.room)return!1;var t=Wo(o),r=Wo(e);if(!oe(t.x,t.y,t.w,t.h,r.x,r.y,r.w,r.h))return!1;for(var a=o.x,m=o.y,n=o.size/2+1,s=e.x,l=e.y,c=e.size/2+1,f=o.states[o.state],d=e.states[e.state],v=o.gfxData,g=0,b=v[g++],u=e.gfxData,p=0,x=u[p++],k=0;k<f;k++)g+=b,b=v[g++];for(k=0;k<d;k++)p+=x,x=u[p++];var h=p;a-=y,s-=y;for(k=0;k<b;k++){for(var O=v[g],j=0;j<8;j++)if(O&1<<7-j){p=h;for(var D=0;D<x;D++){for(var Y=u[p],w=0;w<8;w++)if(Y&1<<7-w){var X=a+2*j*n;X>=i&&(X-=i);var L=s+2*w*c;if(L>=i&&(L-=i),oe(X,m,2*n,2,L,l,2*c,2))return!0}++p,l+=2}}++g,m+=2}return!1}function $o(o,e,t,r,a){for(var m=2*o.x,n=2*o.y,s=o.size/2+1,l=o.states[o.state],c=o.gfxData,f=0,d=c[f++],v=0;v<l;v++)f+=d,d=c[f++];m-=y;for(v=0;v<d;v++){for(var g=c[f],b=0;b<8;b++)if(g&1<<7-b){var u=m+2*b*s;if(u>=i&&(u-=i),oe(e,t,r,a,u,n,2*s,2))return!0}++f,n-=2}return!1}function oe(o,e,t,r,a,i,m,n){var s=!0;return(e-r>=i||e<=i-n||o+t<=a||o>=a+m)&&(s=!1),s}function ee(){var o=0,e=0,t=0,r=io/120;return r<1?(o=255*r,e=0,t=255*(1-r)):r<2?(o=255*(1-(r-=1)),e=255*r,t=0):(o=0,e=255*(1-(r-=2)),t=255*r),{r:Math.max(mo,o),g:Math.max(mo,e),b:Math.max(mo,t)}}var te,re,ae,ie,me,ne,se=!1,le=!1,ce=!1,fe=!1,de=!1,ve=!1,ge=!1,be={r:0,g:0,b:0};function ye(o,e,t,r,a,i,m){i=i||1,m=m||1,a-=n,Go.fillStyle="rgba("+o+","+e+","+t+",1)",Go.fillRect(r,a,i,m)}function ue(o){switch(o){case b:te.play();break;case g:re.play();break;case f:ae.play();break;case v:ae.pause(),ae.currentTime=0,ie.play();break;case d:me.play();break;case c:ne.play()}}t.d(e,"onRoomColorChanged",function(){return je});var pe,xe,ke,he;function Oe(){pe.classList.add("fullscreen")}function je(o){var e="rgba("+o.r+","+o.g+","+o.b+", 1)";pe.style.color=e,xe.style.border="1px solid "+e,ke.forEach(function(o){o.style.color=e}),he.style.color=e,he.style.border="2px solid "+e}document.addEventListener("DOMContentLoaded",function(){pe=document.querySelector("body"),document.querySelector(".heading"),xe=document.querySelector(".instructions"),ke=document.querySelectorAll("a"),(he=document.querySelector("button")).onclick=Oe,te=new Audio("./sounds/pickup.wav"),re=new Audio("./sounds/putdown.wav"),ae=new Audio("./sounds/roar.wav"),ie=new Audio("./sounds/dragondie.wav"),me=new Audio("./sounds/eaten.wav"),ne=new Audio("./sounds/won.wav"),te.addEventListener("loadeddata",function(){}),re.addEventListener("loadeddata",function(){}),ae.addEventListener("loadeddata",function(){}),ie.addEventListener("loadeddata",function(){}),me.addEventListener("loadeddata",function(){}),ne.addEventListener("loadeddata",function(){}),Fo=document.getElementById("canvas"),(Go=Fo.getContext("2d")).imageSmoothingEnabled=!1,Go.transform(1,0,0,-1,0,Fo.height),window.onkeydown=function(o){switch(o.key){case"1":se=!0;break;case"2":le=!0}switch(o.keyCode){case 38:de=!0;break;case 40:ve=!0;break;case 37:ce=!0;break;case 39:fe=!0;break;case 32:ge=!0}},window.onkeyup=function(o){switch(o.key){case"1":se=!1;break;case"2":le=!1}switch(o.keyCode){case 38:de=!1;break;case 40:ve=!1;break;case 37:ce=!1;break;case 39:fe=!1;break;case 32:ge=!1}},setInterval(function(){qo()},1e3/l)},!1)}]);